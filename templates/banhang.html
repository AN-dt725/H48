<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>B·∫Øt ƒë·∫ßu b√°n h√†ng</title>
  <style>
    input[type=text] { width: 80%; padding: 15px; font-size: 20px; margin: 10px 0; }
    button { padding: 10px 20px; font-size: 18px; }
    #suggestions div:hover { background-color: #f0f0f0; cursor: pointer; }
  </style>
</head>
<body>
  <a href="{{ url_for('index') }}">
  <button style="padding: 6px 12px; border-radius: 6px; background-color: #007bff; color: white; border: none;">
    ‚¨ÖÔ∏è V·ªÅ trang ch·ªß
  </button>
</a>
  <h2>üß∫ B·∫Øt ƒë·∫ßu b√°n h√†ng</h2>
  <form method="POST">
    <input type="text" name="keyword" id="search" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m..." autocomplete="off">
    <button type="submit">T√¨m ki·∫øm</button>
  </form>
  <div id="suggestions"></div>

  {% if ket_qua %}
    <ul>
    {% for row in ket_qua.itertuples() %}
      <li><strong>{{ row._1 }}</strong> ({{ row._2 }}) - {{ row._3 }}</li>
    {% endfor %}
    </ul>
  {% endif %}

<script>
document.getElementById('search').addEventListener('input', function() {
  let keyword = this.value;
  fetch('/autocomplete?term=' + keyword)
    .then(res => res.json())
    .then(data => {
      let suggestionBox = document.getElementById('suggestions');
      suggestionBox.innerHTML = '';
      data.forEach(item => {
        let div = document.createElement('div');
        div.innerHTML = item.label;
        div.onclick = () => {
          document.getElementById('search').value = item.value;
          suggestionBox.innerHTML = '';
        };
        suggestionBox.appendChild(div);
      });
    });
});
</script>
</body>
</html>
