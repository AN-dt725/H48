
<!DOCTYPE html>
<html>
<head>
    <title>Báº¯t Ä‘áº§u bÃ¡n hÃ ng</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        function themVaoGio(item, price) {
            let ul = document.getElementById("cart");
            let li = document.createElement("li");
            li.innerHTML = item + " - " + price + " <button onclick='this.parentElement.remove(); tinhTong();'>âŒ XÃ³a</button>";
            ul.appendChild(li);
            tinhTong();
        }

        function tinhTong() {
            let items = document.querySelectorAll("#cart li");
            let tong = 0;
            items.forEach(li => {
                let match = li.textContent.match(/(\d+)k/);
                if (match) tong += parseInt(match[1]);
            });
            document.getElementById("tong").innerText = tong + "k";
        }

        $(function() {
            $("#keyword").on("input", function() {
                let term = $(this).val();
                if (term.length > 0) {
                    $.getJSON("/autocomplete", { term: term }, function(data) {
                        $("#goiy").empty();
                        data.forEach(item => {
                            let parts = item.split(" - ");
                            $("#goiy").append(`<div><button onclick="themVaoGio('${parts[0]}', '${parts[1]}')">${item}</button></div>`);
                        });
                    });
                } else {
                    $("#goiy").empty();
                }
            });
        });
    </script>
</head>
<body>
    <a href="/"><button>ğŸ”™ Vá» trang chá»§</button></a>
    <h2>ğŸ§º Báº¯t Ä‘áº§u bÃ¡n hÃ ng</h2>
    <form method="POST">
        <input type="text" name="keyword" id="keyword" placeholder="Nháº­p tÃªn sáº£n pháº©m..." autocomplete="off">
        <input type="submit" value="TÃ¬m kiáº¿m">
    </form>
    <div id="goiy"></div>

    <h3>ğŸ§º Giá» hÃ ng</h3>
    <ul id="cart"></ul>
    <p>ğŸ§¾ <strong>Tá»•ng cá»™ng: <span id="tong">0k</span></strong></p>
</body>
</html>
